Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../lib/utils"),t=i(require("../Component")),r=i(require("./Wire/Wire"));function i(e){return e&&e.__esModule?e:{default:e}}const n=[6,31,4,29,18,39,16,25,30,23,28,1,38,11,36,37,26,27,24,21,14,3,12,17,2,7,0,33,10,35,8,5,22,19,20,13,34,15,32,9],s=[6,0,7,5,1,8,4,2,9,3];class g extends t.default{#e={};#t=0;setUhrSetting(t){var r;this.#t=(0,e.getModularNumber)(t,n.length),null===(r=this.getEventEmitter())||void 0===r||r.emit("change.uhrSetting",this.#t)}getUhrSetting(){return this.#t}getInnerPin(t){return(0,e.getModularNumber)(n[(0,e.getModularNumber)(t+this.#t,n.length)]-this.#t,n.length)}getOuterPin(t){const r=(0,e.getModularNumber)(t+this.#t,n.length),i=n.indexOf(r);return(0,e.getModularNumber)(i-this.#t,n.length)}getIngoingBlackWire(e){const t=4*(e-1),r=this.getInnerPin(t);return s[(r-2)/4]+1}getOutgoingBlackWire(e){const t=4*(e-1)+2,r=this.getInnerPin(t);return s[r/4]+1}getIngoingRedWire(e){const t=4*s.indexOf(e-1);return(this.getOuterPin(t)-2)/4+1}getOutgoingRedWire(e){const t=4*s.indexOf(e-1)+2;return this.getOuterPin(t)/4+1}getUhrWire(e){return this.#e[e]}getUhrWires(){return Object.keys(this.#e).sort(((e,t)=>Number(t)-Number(e))).map((e=>this.#e[e]))}prepareUhrWire(e,t,i){const n=this,s=new class extends r.default{swapForward(t){return t===this.firstLetter?n.#e[n.getIngoingBlackWire(e)].secondLetter:t===this.secondLetter?n.#e[n.getIngoingRedWire(e)].firstLetter:void 0}swapBackward(t){return t===this.firstLetter?n.#e[n.getOutgoingBlackWire(e)].secondLetter:t===this.secondLetter?n.#e[n.getOutgoingRedWire(e)].firstLetter:void 0}}(t,i);return this.#e[e]=s,s}prepareUhrWires(e){e.forEach((([e,t],r)=>{this.prepareUhrWire(r+1,e,t)}))}}exports.default=g;
